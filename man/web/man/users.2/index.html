<html><title>man/users.2</title><body style="font-family:Courier;background-color:#000;color:#FFF;"><span style="color:FFFFFF;font-weight:bold;">NAME<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;users - kernel-level user management API<br><br><span style="color:FFFFFF;font-weight:bold;">DESCRIPTION<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;users<span style="color:FFFFFF;font-weight:normal;"> (<span style="color:FFFFFF;font-weight:bold;">kernel.users<span style="color:FFFFFF;font-weight:normal;"> in the environment provided to <span style="color:FFFFFF;font-weight:bold;">init<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">)) is Monolith's user management API.&nbsp;&nbsp;The version provided to <span style="color:FFFFFF;font-weight:bold;">init<span style="color:FFFFFF;font-weight:normal;"> is largely a shell, and is later complemented by the userspace API <span style="color:FFFFFF;font-weight:bold;">users<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">).&nbsp;&nbsp;Note that the kernel-based <span style="color:FFFFFF;font-weight:bold;">users<span style="color:FFFFFF;font-weight:normal;"> API does NOT resolve usernames to UIDs; for that, see <span style="color:FFFFFF;font-weight:bold;">users<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">).<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">kernel.users<span style="color:FFFFFF;font-weight:normal;"> is not directly accessible from user programs.<br><br><span style="color:FFFFFF;font-weight:bold;">METHODS<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authenticate<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">password<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to authenticate the current process as <span style="color:DDDD00;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;Returns <span style="color:FF00FF;font-weight:bold;">true<span style="color:FFFFFF;font-weight:normal;"> on success, <span style="color:FF00FF;font-weight:bold;">false<span style="color:FFFFFF;font-weight:normal;"> and an error message on failure.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">login<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">password<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to login the current process as <span style="color:DDDD00;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">. Returns <span style="color:FF00FF;font-weight:bold;">true<span style="color:FFFFFF;font-weight:normal;"> on success, <span style="color:FF00FF;font-weight:bold;">false<span style="color:FFFFFF;font-weight:normal;"> and an error message on failure.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">(): <span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current UID.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">add<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">password<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FFFFFF;font-weight:bold;">cansudo<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;">]): <span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to add a user, returning the new user's UID.&nbsp;&nbsp;Only the root user can perform this function.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">del<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to delete user <span style="color:DDDD00;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;Only the root user can perform this function.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">sudo<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">func<span style="color:FFFFFF;font-weight:normal;">:<span style="color:00AAFF;font-weight:bold;">function<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">password<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;">, ... or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to execute function <span style="color:00AAFF;font-weight:bold;">func<span style="color:FFFFFF;font-weight:normal;"> as user <span style="color:DDDD00;font-weight:bold;">uid<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;<span style="color:FF0000;font-weight:bold;">password<span style="color:FFFFFF;font-weight:normal;"> should be the current user's password.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On success, returns <span style="color:FF00FF;font-weight:bold;">true<span style="color:FFFFFF;font-weight:normal;"> and the first two results from <span style="color:FFFFFF;font-weight:bold;">pcall<span style="color:FFFFFF;font-weight:normal;">(<span style="color:00AAFF;font-weight:bold;">func<span style="color:FFFFFF;font-weight:normal;">).<br><br><span style="color:FFFFFF;font-weight:bold;">NOTES<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All <span style="color:FFFFFF;font-weight:bold;">users<span style="color:FFFFFF;font-weight:normal;"> functions are overwritten in userspace by the <span style="color:FFFFFF;font-weight:bold;">users<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">) API.&nbsp;&nbsp;This API is usually only relevant to kernel or <span style="color:FFFFFF;font-weight:bold;">init<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">,<span style="color:FFFFFF;font-weight:bold;">5<span style="color:FFFFFF;font-weight:normal;">) development.<br><br><span style="color:FFFFFF;font-weight:bold;">COPYRIGHT<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Monolith Kernel Interfaces<span style="color:FFFFFF;font-weight:normal;"> (c) 2020 Ocawesome101 under the GNU GPLv3.<br><br><span style="color:FFFFFF;font-weight:bold;">SEE ALSO<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;usermgr<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">users<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">init<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">init<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">5<span style="color:FFFFFF;font-weight:normal;">)<br>
</body></html>