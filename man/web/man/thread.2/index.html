<html><title>man/thread.2</title><body style="font-family:Courier;background-color:#000;color:#FFF;"><span style="color:FFFFFF;font-weight:bold;">NAME<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread - system thread management<br><br><span style="color:FFFFFF;font-weight:bold;">DESCRIPTION<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread<span style="color:FFFFFF;font-weight:normal;"> provides thread management for the Monolith kernel.&nbsp;&nbsp;In addition to a few functions, <span style="color:FFFFFF;font-weight:bold;">thread<span style="color:FFFFFF;font-weight:normal;"> also provides a table of predefined <span style="color:FFFFFF;font-weight:bold;">signals<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">), not to be confused with the signals returned from <span style="color:FFFFFF;font-weight:bold;">computer.pullSignal<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">).<br><br><span style="color:FFFFFF;font-weight:bold;">SIGNALS<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread_died<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Queued on the death of a thread.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">thread_errored<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">reason<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Queued when a thread errors.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">ipc<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">from<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, ...)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This signal is thread-local, and sent on IPC communication.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">signal<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">from<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">signal<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This signal is thread-local. Sent on signal reception.<br><br><span style="color:FFFFFF;font-weight:bold;">METHODS<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spawn<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">func<span style="color:FFFFFF;font-weight:normal;">:<span style="color:00AAFF;font-weight:bold;">function<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">name<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FFFFFF;font-weight:bold;">handler<span style="color:FFFFFF;font-weight:normal;">:<span style="color:00AAFF;font-weight:bold;">function<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FFFFFF;font-weight:bold;">env<span style="color:FFFFFF;font-weight:normal;">:<span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">]]): <span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Spawns a thread from function <span style="color:00AAFF;font-weight:bold;">func<span style="color:FFFFFF;font-weight:normal;"> named <span style="color:FF0000;font-weight:bold;">name<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;If <span style="color:00AAFF;font-weight:bold;">handler<span style="color:FFFFFF;font-weight:normal;"> is specified, it will be called if the thread errors.&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">env<span style="color:FFFFFF;font-weight:normal;"> may be used to predefine environment variables.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">threads<span style="color:FFFFFF;font-weight:normal;">(): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a table of running PIDs.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">info<span style="color:FFFFFF;font-weight:normal;">([<span style="color:FFFFFF;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">]): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a table of information about the specified thread (defaults to the current thread), or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;"> and an error message.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Information tables are formatted as such:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">name<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">owner<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">priority<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">parent<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">uptime<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">started<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">}<span style="color:FFFFFF;font-weight:normal;"><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the specified thread is the current one, the information table will have an additional field, <span style="color:00FF00;font-weight:bold;">data<span style="color:FFFFFF;font-weight:normal;">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">info.data<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">io<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">[0]<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FFFFFF;font-weight:bold;">thread stdin<span style="color:FFFFFF;font-weight:normal;">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">[1]<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FFFFFF;font-weight:bold;">thread stdout<span style="color:FFFFFF;font-weight:normal;">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">[2]<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FFFFFF;font-weight:bold;">thread stderr<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">}<span style="color:FFFFFF;font-weight:normal;">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">env<span style="color:FFFFFF;font-weight:normal;"> = <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">: <span style="color:FFFFFF;font-weight:bold;">thread environment variables<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00FF00;font-weight:bold;">}<span style="color:FFFFFF;font-weight:normal;"><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">ipc<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, ...): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends an IPC event to thread <span style="color:DDDD00;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">signal<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">signal<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends signal <span style="color:DDDD00;font-weight:bold;">signal<span style="color:FFFFFF;font-weight:normal;"> to thread <span style="color:DDDD00;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">kill<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">:<span style="color:DDDD00;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alias for <span style="color:FFFFFF;font-weight:bold;">signal<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">pid<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">signals.kill<span style="color:FFFFFF;font-weight:normal;">)<br><br><span style="color:FFFFFF;font-weight:bold;">COPYRIGHT<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Monolith Kernel Interfaces<span style="color:FFFFFF;font-weight:normal;"> (c) 2020 Ocawesome101 under the GNU GPLv3.<br><br><span style="color:FFFFFF;font-weight:bold;">SEE ALSO<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;computer<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">ps<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">kill<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">)<br><br>
</body></html>