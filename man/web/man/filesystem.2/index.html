<html><link rel="stylesheet" href="https://oz-craft.pickardayune.com/blog/style.css"><title>man/filesystem.2</title><body><span style="color:FFFFFF;font-weight:bold;">NAME<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filesystem - interface to all mounted filesystems<br><br><span style="color:FFFFFF;font-weight:bold;">DESCRIPTION<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All files accessible in a Unix-like system are arranged in one big tree, the file hierarchy, rooted at <span style="color:DDDD00;font-weight:bold;">/<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;These files can be spread out over several devices.&nbsp;&nbsp;The <span style="color:FFFFFF;font-weight:bold;">mount<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">) command serves to attach the filesystem found at some address to the big file tree.&nbsp;&nbsp;Conversely, the <span style="color:FFFFFF;font-weight:bold;">umount<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">) command will detach it again.&nbsp;&nbsp;The filesystem is used to control how data is stored on the device.&nbsp;&nbsp;This library allows an abstracted interface on top of this file tree.&nbsp;&nbsp;This is not to be confused with the <span style="color:FFFFFF;font-weight:bold;">filesystem<span style="color:FFFFFF;font-weight:normal;"> component; for this, see the result of <span style="color:DDDD00;font-weight:bold;">cdoc filesystem<span style="color:FFFFFF;font-weight:normal;"> in the shell.<br><br><span style="color:FFFFFF;font-weight:bold;">METHODS<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All methods not specifically defined here function identically to calling the same method on a filesystem component proxy.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">name<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the file name component of the provided <span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns exactly the inverse of <span style="color:00AAFF;font-weight:bold;">filesystem.name<span style="color:FFFFFF;font-weight:normal;">; This means that <span style="color:00AAFF;font-weight:bold;">filesystem.path<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FF0000;font-weight:bold;">"/bin/ls.lua"<span style="color:FFFFFF;font-weight:normal;">) <span style="color:FF0000;font-weight:bold;">.. "/" .. <span style="color:FFFFFF;font-weight:normal;"> <span style="color:00AAFF;font-weight:bold;">filesystem.name<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FF0000;font-weight:bold;">"/bin/ls.lua"<span style="color:FFFFFF;font-weight:normal;">) is equal to <span style="color:FF0000;font-weight:bold;">"/bin/ls.lua"<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">list<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a list of files under the directory at <span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;The list may be used as an iterator.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">open<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FFFFFF;font-weight:bold;">mode<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">]): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a non-buffered stream to the file at the specified <span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;The methods <span style="color:00AAFF;font-weight:bold;">read<span style="color:FFFFFF;font-weight:normal;">, <span style="color:00AAFF;font-weight:bold;">write<span style="color:FFFFFF;font-weight:normal;">, and <span style="color:00AAFF;font-weight:bold;">seek<span style="color:FFFFFF;font-weight:normal;"> are available and function similarly to their buffered counterparts; however, <span style="color:00AAFF;font-weight:bold;">fileStream:read<span style="color:FFFFFF;font-weight:normal;"> and <span style="color:00AAFF;font-weight:bold;">fileStream:write<span style="color:FFFFFF;font-weight:normal;"> each take a single argument, and <span style="color:00AAFF;font-weight:bold;">fileStream:read<span style="color:FFFFFF;font-weight:normal;"> accepts the string argument <span style="color:FF0000;font-weight:bold;">"<span style="color:FFFFFF;font-weight:bold;">a"<span style="color:FFFFFF;font-weight:normal;"> to read all unread data from the file.&nbsp;&nbsp;It is recommended to use the <span style="color:FFFFFF;font-weight:bold;">io<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">) library for file IO wherever possible.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">canonical<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the canonicalized form of the specified <span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">concat<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path1<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">path2<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FFFFFF;font-weight:bold;">...<span style="color:FFFFFF;font-weight:normal;">]): <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the canonicalized, concatenated form of all provided paths, e.g. <span style="color:00AAFF;font-weight:bold;">fs.concat<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FF0000;font-weight:bold;">"/lib/.."<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">"bin"<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">"ls.lua"<span style="color:FFFFFF;font-weight:normal;">) returns <span style="color:FF0000;font-weight:bold;">"/bin/ls.lua"<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">mount<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">fsp<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">[, <span style="color:FFFFFF;font-weight:bold;">ro<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;">]): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mounts the specified filesystem <span style="color:00FF00;font-weight:bold;">fsp<span style="color:FFFFFF;font-weight:normal;"> at the specified <span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;If <span style="color:FF0000;font-weight:bold;">fsp<span style="color:FFFFFF;font-weight:normal;"> is a string, will attempt to <span style="color:00AAFF;font-weight:bold;">component.proxy<span style="color:FFFFFF;font-weight:normal;"> <span style="color:FF0000;font-weight:bold;">fsp<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;If <span style="color:FF00FF;font-weight:bold;">ro<span style="color:FFFFFF;font-weight:normal;"> is <span style="color:FF00FF;font-weight:bold;">true<span style="color:FFFFFF;font-weight:normal;">, mounts the filesystem as read-only whether the filesystem component is read-only or not.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">mounts<span style="color:FFFFFF;font-weight:normal;">(): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a table of current mounts, with the key-value arrangement [<span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">] = <span style="color:FF0000;font-weight:bold;">address<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">umount<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:FF00FF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;"> or <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmounts the filesystem mounted at the specified <span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">get<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">:<span style="color:FF0000;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">): <span style="color:00FF00;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the component proxy of the filesystem mounted at the specified <span style="color:FF0000;font-weight:bold;">path<span style="color:FFFFFF;font-weight:normal;">.<br><br><span style="color:FFFFFF;font-weight:bold;">NOTES<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The behavior of <span style="color:00AAFF;font-weight:bold;">filesystem.list<span style="color:FFFFFF;font-weight:normal;"> and <span style="color:00AAFF;font-weight:bold;">fileStream:read<span style="color:FFFFFF;font-weight:normal;"> deviates slightly from the OpenOS implementations.&nbsp;&nbsp;The OpenOS API documentation may be found at <span style="color:00AAFF;font-weight:bold;">https://ocdoc.cil.li/api:filesystem<span style="color:FFFFFF;font-weight:normal;">.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00AAFF;font-weight:bold;">filesystem.copy<span style="color:FFFFFF;font-weight:normal;"> and <span style="color:00AAFF;font-weight:bold;">filesystem.rename<span style="color:FFFFFF;font-weight:normal;"> cannot operate on directories.&nbsp;&nbsp;For a recursive copy function, see <span style="color:FFFFFF;font-weight:bold;">cp.copy<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">).<br><br><span style="color:FFFFFF;font-weight:bold;">COPYRIGHT<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Monolith Kernel Interfaces<span style="color:FFFFFF;font-weight:normal;"> (c) 2020 Ocawesome101 under the GNU GPLv3.<br><br><span style="color:FFFFFF;font-weight:bold;">SEE ALSO<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">cdoc<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">mount<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">umount<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">1<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">component<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">cp.copy<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">)<br>
</body></html>