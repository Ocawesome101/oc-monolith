<html><title>man/lua.5</title><body style="font-family:Courier;background-color:#000;color:#FFF;"><span style="color:FFFFFF;font-weight:bold;">NAME<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lua - the Lua programming language<br><br><span style="color:FFFFFF;font-weight:bold;">NOTE<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FF0000;font-weight:bold;">This manual page is incomplete.&nbsp;&nbsp;If you feel that you can make contributions to it, please do, and create a pull request.<br><br><span style="color:FFFFFF;font-weight:bold;">OVERVIEW/INTRODUCTION<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This manual page attempts to give an overview of the basics of Lua.&nbsp;&nbsp;It assumes that the reader has previous experience with programming and is familiar with <span style="color:FFFFFF;font-weight:bold;">if<span style="color:FFFFFF;font-weight:normal;">/<span style="color:FFFFFF;font-weight:bold;">else<span style="color:FFFFFF;font-weight:normal;"> blocks, <span style="color:FFFFFF;font-weight:bold;">while<span style="color:FFFFFF;font-weight:normal;"> and <span style="color:FFFFFF;font-weight:bold;">for<span style="color:FFFFFF;font-weight:normal;"> loops; in essence, the basics of computer programming.&nbsp;&nbsp;I do NOT attempt to teach the basic grounding concepts of programming which I have previously mentioned.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For complete function documentation on the Lua programming language, see <span style="color:00AAFF;font-weight:bold;">https://lua.org/manual/5.3/manual.html<span style="color:FFFFFF;font-weight:normal;">.<br><br><span style="color:FFFFFF;font-weight:bold;">THE LANGUAGE<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">Types<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lua provides seven types: <span style="color:FFFFFF;font-weight:bold;">string<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">number<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">function<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">boolean<span style="color:FFFFFF;font-weight:normal;">, <span style="color:FFFFFF;font-weight:bold;">thread<span style="color:FFFFFF;font-weight:normal;">, and <span style="color:FFFFFF;font-weight:bold;">nil<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;An eighth type, <span style="color:FFFFFF;font-weight:bold;">userdata<span style="color:FFFFFF;font-weight:normal;">, is sometimes used (usually from the C side) but will not be covered here.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">Global Environment<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lua's global environment (_G) takes the form of a table (see below).&nbsp;&nbsp;This simpifies program flow and allows for easier sandbox creation (more on this later).<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">Variables<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In Lua, unless explicitly declared as <span style="color:DDDD00;font-weight:bold;">local<span style="color:FFFFFF;font-weight:normal;">, all variables are global - that is, not affected by scope.&nbsp;&nbsp;Local variables are usually faster to access, and are lighter on memory as they are cleared when the scope is exited and garbage-collected.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Variable names can contain any combination, except certain reserved keywords, of alphanumeric characters plus the underscore.&nbsp;&nbsp;Variable names may not begin with a number and may be of any practical length - in my testing I was able to assign a roughly 28,700-character variable name.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">Tables<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lua's tables are simple collections of key-value pairs or hashmaps, similar to Python's <span style="color:FFFFFF;font-weight:bold;">dictionary<span style="color:FFFFFF;font-weight:normal;"> or, loosely, C's <span style="color:FFFFFF;font-weight:bold;">struct<span style="color:FFFFFF;font-weight:normal;">.&nbsp;&nbsp;Both keys and values can be of any type.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tables are declared using curly braces (<span style="color:FFFFFF;font-weight:bold;">{}<span style="color:FFFFFF;font-weight:normal;">) and indexed using square braces (<span style="color:FFFFFF;font-weight:bold;">[]<span style="color:FFFFFF;font-weight:normal;">).&nbsp;&nbsp;Table keys provide value indices, and if a key is a syntactically valid variable name it can be indexed with the syntax <span style="color:FFFFFF;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">.<span style="color:FFFFFF;font-weight:bold;">key<span style="color:FFFFFF;font-weight:normal;"> rather than <span style="color:FFFFFF;font-weight:bold;">table<span style="color:FFFFFF;font-weight:normal;">[<span style="color:FFFFFF;font-weight:bold;">key<span style="color:FFFFFF;font-weight:normal;">].<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">Metatables<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metatables are tables containing specific fields which declare otherwise undefined behavior on certain objects.&nbsp;&nbsp;Excepting tables and userdata, every type has a single shared metatable which cannot be changed except through <span style="color:FFFFFF;font-weight:bold;">debug.setmetatable<span style="color:FFFFFF;font-weight:normal;">, which is not available in OpenComputers.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For example, metatables may be used to implement object-oriented programming (see the <span style="color:FFFFFF;font-weight:bold;">class<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">) library included with Monolith).<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Monolith facilitates using the <span style="color:FFFFFF;font-weight:bold;">__type<span style="color:FFFFFF;font-weight:normal;"> field of metatables to implement custom types, through an override of the <span style="color:FFFFFF;font-weight:bold;">type<span style="color:FFFFFF;font-weight:normal;"> function in the kernel.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">Threading<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lua does not support multithreading.&nbsp;&nbsp;Monolith, OpenOS, PsychOS, OpenNT, Fuchas, Plan9k, and many other operating systems that may provide the illusion of multithreading provide a cooperative implementation using Lua's built-in <span style="color:FFFFFF;font-weight:bold;">coroutine<span style="color:FFFFFF;font-weight:normal;"> API.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">Scoping<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In Lua, as in many other languages, local variables are local to the block they are in, and any sub-blocks.&nbsp;&nbsp;For example, in the following code sample, variable <span style="color:FFFFFF;font-weight:bold;">a<span style="color:FFFFFF;font-weight:normal;"> is available to the entire program, while variable <span style="color:FFFFFF;font-weight:bold;">b<span style="color:FFFFFF;font-weight:normal;"> is available only to the block in which it is declared.&nbsp;&nbsp;Local variables are only usable after they are declared, while global variables may be used and declared anywhere in a program.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:DDDD00;font-weight:bold;">local<span style="color:FFFFFF;font-weight:normal;"> a = <span style="color:FF0000;font-weight:bold;">"This is a string."<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:DDDD00;font-weight:bold;">do<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:DDDD00;font-weight:bold;">local<span style="color:FFFFFF;font-weight:normal;"> b = <span style="color:FF00FF;font-weight:bold;">46209<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00AAFF;font-weight:bold;">print<span style="color:FFFFFF;font-weight:normal;">(a, b) <span style="color:00AAFF;font-weight:bold;">-- prints "This is a string.&nbsp;&nbsp;&nbsp;&nbsp;46209"<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:DDDD00;font-weight:bold;">end<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:00AAFF;font-weight:bold;">print<span style="color:FFFFFF;font-weight:normal;">(b) <span style="color:00AAFF;font-weight:bold;">-- prints "nil"<span style="color:FFFFFF;font-weight:normal;"><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:FFFFFF;font-weight:bold;">Libraries<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lua libraries are loaded using the <span style="color:00AAFF;font-weight:bold;">require<span style="color:FFFFFF;font-weight:normal;"> function.&nbsp;&nbsp;In OpenComputers, this function is provided by the OS and is unavailable when programming an EEPROM or writing an OS from scratch.&nbsp;&nbsp;The OS also provides many libraries such as <span style="color:FFFFFF;font-weight:bold;">event<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">3<span style="color:FFFFFF;font-weight:normal;">) or <span style="color:FFFFFF;font-weight:bold;">io<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">).<br><br><span style="color:FFFFFF;font-weight:bold;">NON-STANDARD LUA APIS PROVIDED BY OPENCOMPUTERS<span style="color:FFFFFF;font-weight:normal;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OpenComputers provides a few extra APIs and one extra function, to aid in writing programs.&nbsp;&nbsp;These are the <span style="color:FFFFFF;font-weight:bold;">unicode<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">), <span style="color:FFFFFF;font-weight:bold;">component<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">), and <span style="color:FFFFFF;font-weight:bold;">computer<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">) APIs, as well as the <span style="color:00AAFF;font-weight:bold;">checkArg<span style="color:FFFFFF;font-weight:normal;">(<span style="color:FFFFFF;font-weight:bold;">2<span style="color:FFFFFF;font-weight:normal;">) function.<br><br><span style="color:FFFFFF;font-weight:bold;">COPYRIGHT<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lua<span style="color:FFFFFF;font-weight:normal;"> is copyright (c) 1994-2020 Lua.org, PUC-Rio<br>
</body></html>